<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Office Seating Plan</title>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }

      svg {
        width: 100%;
        height: 800px;
        background-image: url("floorPlan.png");
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
      }

      .seat rect {
        fill: #e5e7eb;
        stroke: #374151;
        rx: 6;
        cursor: grab;
      }

      .seat:hover rect {
        fill: #3b82f6;
      }

      .seat.occupied rect {
        fill: #22c55e;
      }

      .tooltip {
        position: absolute;
        background: #111827;
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 12px;
        display: none;
        pointer-events: none;
        z-index: 100;
      }
    </style>
  </head>

  <body>
    <svg id="floorSvg">
      <g
        class="seat"
        data-seat="6F-214"
        transform="translate(230,110)
             translate(13,9)
             rotate(-60)
             translate(-13,-9)"
        style="cursor: grab">
        <!-- Monitor screen -->
        <rect
          x="0"
          y="0"
          width="26"
          height="18"
          rx="3"
          fill="#fff"
          stroke="#000"
          stroke-width="1.5" />

        <!-- Monitor stand (neck) -->
        <line
          x1="13"
          y1="18"
          x2="13"
          y2="23"
          stroke="#000"
          stroke-width="1.5" />

        <!-- Monitor base -->
        <rect x="8" y="23" width="10" height="3" rx="1" fill="#000" />
      </g>
    </svg>
    <div id="tooltip" class="tooltip"></div>

    <script>
      /* =================== SEAT DATA (53) =================== */
      const seats = [
        { id: "1", x: 225, y: 130, r: -60 },
        { id: "6", x: 255, y: 145, r: -60 },
        { id: "2", x: 285, y: 160, r: -60 },
        { id: "7", x: 320, y: 140, r: 0 },
        { id: "3", x: 350, y: 140, r: 0 },
        { id: "8", x: 380, y: 140, r: 0 },
        { id: "4", x: 415, y: 155, r: 60 },
        { id: "9", x: 440, y: 180, r: 60 },
        { id: "5", x: 465, y: 205, r: 60 },

        { id: "11", x: 225, y: 280, r: -60 },
        { id: "16", x: 255, y: 295, r: -60 },
        { id: "12", x: 285, y: 310, r: -60 },
        { id: "17", x: 320, y: 290, r: 0 },
        { id: "13", x: 350, y: 290, r: 0 },
        { id: "18", x: 380, y: 290, r: 0 },
        { id: "14", x: 415, y: 305, r: 60 },
        { id: "19", x: 440, y: 330, r: 60 },
        { id: "15", x: 465, y: 355, r: 60 },

        { id: "20", x: 600, y: 130, r: -60 },
        { id: "25", x: 630, y: 145, r: -60 },
        { id: "21", x: 660, y: 160, r: -60 },
        { id: "26", x: 695, y: 140, r: 0 },
        { id: "22", x: 725, y: 140, r: 0 },
        { id: "27", x: 755, y: 140, r: 0 },
        { id: "23", x: 790, y: 155, r: 60 },
        { id: "28", x: 815, y: 180, r: 60 },
        { id: "24", x: 840, y: 205, r: 60 },

        { id: "29", x: 600, y: 280, r: -60 },
        { id: "34", x: 630, y: 295, r: -60 },
        { id: "30", x: 660, y: 310, r: -60 },
        { id: "35", x: 695, y: 290, r: 0 },
        { id: "31", x: 725, y: 290, r: 0 },
        { id: "36", x: 755, y: 290, r: 0 },
        { id: "32", x: 790, y: 305, r: 60 },
        { id: "37", x: 815, y: 330, r: 60 },
        { id: "33", x: 840, y: 355, r: 60 },

        { id: "38", x: 500, y: 420, r: 0 },
        { id: "50", x: 530, y: 420, r: 0 },
        { id: "39", x: 560, y: 420, r: 0 },
        { id: "51", x: 590, y: 420, r: 0 },
        { id: "40", x: 620, y: 420, r: 0 },
        { id: "52", x: 650, y: 420, r: 0 },
        { id: "41", x: 680, y: 420, r: 0 },
        { id: "42", x: 500, y: 420, r: 0 },
        { id: "53", x: 530, y: 420, r: 0 },
        { id: "43", x: 560, y: 420, r: 0 },
        { id: "44", x: 620, y: 420, r: 0 },
        { id: "45", x: 680, y: 420, r: 0 },
        { id: "46", x: 500, y: 420, r: 0 },
        { id: "47", x: 560, y: 420, r: 0 },
        { id: "48", x: 620, y: 420, r: 0 },
        { id: "49", x: 680, y: 420, r: 0 },
        { id: "54", x: 530, y: 420, r: 0 },
      ];

      /* =================== EMPLOYEE DATA =================== */
      const seatEmployees = {
        "6F-211": { name: "Amit Kumar", dept: "Engineering" },
        "6F-212": { name: "Sneha Patel", dept: "QA" },
        "6F-213": { name: "Rahul Singh", dept: "HR" },
      };

      /* =================== DRAG STATE =================== */
      let active = null;
      let offset = { x: 0, y: 0 };
      const svg = document.getElementById("floorSvg");
      const tooltip = document.getElementById("tooltip");

      /* =================== HELPERS =================== */
      function svgPoint(evt) {
        const pt = svg.createSVGPoint();
        pt.x = evt.clientX;
        pt.y = evt.clientY;
        return pt.matrixTransform(svg.getScreenCTM().inverse());
      }

      function setTransform(g, seat) {
        g.setAttribute(
          "transform",
          `translate(${seat.x},${seat.y})
     translate(13,9)
     rotate(${seat.r})
     translate(-13,-9)`,
        );
      }

      /* =================== RENDER =================== */
      seats.forEach((seat) => {
        const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
        g.classList.add("seat");
        g.dataset.seat = seat.id;

        const rect = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "rect",
        );
        rect.setAttribute("width", 26);
        rect.setAttribute("height", 18);
        rect.setAttribute("rx", 4);

        g.appendChild(rect);
        setTransform(g, seat);
        svg.appendChild(g);

        /* Drag start */
        g.addEventListener("mousedown", (e) => {
          e.preventDefault();
          active = { g, seat };
          const pt = svgPoint(e);
          offset.x = pt.x - seat.x;
          offset.y = pt.y - seat.y;
          g.style.cursor = "grabbing";
        });

        /* Tooltip */
        g.addEventListener("mousemove", (e) => {
          if (active) return;
          const emp = seatEmployees[seat.id];
          if (!emp) return;

          tooltip.innerHTML = `<strong>${seat.id}</strong><br>${emp.name}<br>${emp.dept}`;
          tooltip.style.left = e.pageX + 12 + "px";
          tooltip.style.top = e.pageY + 12 + "px";
          tooltip.style.display = "block";
        });

        g.addEventListener(
          "mouseleave",
          () => (tooltip.style.display = "none"),
        );
      });

      /* Drag move */
      svg.addEventListener("mousemove", (e) => {
        if (!active) return;
        const pt = svgPoint(e);
        active.seat.x = pt.x - offset.x;
        active.seat.y = pt.y - offset.y;
        setTransform(active.g, active.seat);
      });

      /* Drag end */
      svg.addEventListener("mouseup", () => {
        if (!active) return;
        active.g.style.cursor = "grab";
        active = null;
      });

      svg.addEventListener("mouseleave", () => (active = null));
    </script>
  </body>
</html>
